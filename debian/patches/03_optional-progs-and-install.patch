Allow the programs that are to be built to be defined in the build
configuration.

Provide an install target for installing the programs in $(INSTALL_DIR)/bin.

This patch by Thierry Reding.
Not submitted to Mesa.
--
Also remove references to GLU library since it is not required
and we don't actually build it at this point.


---
 progs/Makefile        |    6 +++++-
 progs/xdemos/Makefile |    7 ++++++-
 2 files changed, 11 insertions(+), 2 deletions(-)

--- a/progs/xdemos/Makefile
+++ b/progs/xdemos/Makefile
@@ -13,7 +13,7 @@ APP_LIB_DEPS += -lX11 -lpthread
 
 LIBS = -L$(TOP)/$(LIB_DIR) -l$(GL_LIB) -L$(libdir) $(APP_LIB_DEPS)
 
-PROGS = \
+PROGS ?= \
 	corender \
 	glsync \
 	glthreads \
@@ -68,6 +68,11 @@ default: $(PROGS)
 extra: $(EXTRA_PROGS)
 
 
+install: $(PROGS)
+	$(INSTALL) -d $(DESTDIR)$(INSTALL_DIR)/bin
+	$(INSTALL) -m 755 $(PROGS) $(DESTDIR)$(INSTALL_DIR)/bin
+
+
 clean:
 	-rm -f $(PROGS) $(EXTRA_PROGS)
 	-rm -f *.o *~
--- a/progs/Makefile
+++ b/progs/Makefile
@@ -21,8 +21,12 @@ subdirs:
 		fi \
 	done
 
-# Dummy install target
 install:
+	@for dir in $(SUBDIRS) ; do \
+		if [ -d $$dir ] ; then \
+			(cd $$dir ; $(MAKE) install) ; \
+		fi \
+	done
 
 clean:
 	@list='$(SUBDIRS)'; for dir in $$list tests ; do \
